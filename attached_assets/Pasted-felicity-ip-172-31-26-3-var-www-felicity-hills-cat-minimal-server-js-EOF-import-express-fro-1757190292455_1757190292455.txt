felicity@ip-172-31-26-3:/var/www/felicity-hills$ cat > minimal-server.js << 'EOF'
import express from 'express';

const app = express();
app.use(express.json());
app.use(express.urlencoded({ extended: false }));

// Import and register just the API routes
import('./dist/index.js').then(module => {
  // This will import your routes but skip the static file serving
}).catch(err => {
  console.error('Import error:', err);
});

// Simple test endpoints
app.get('/test', (req, res) => {
  res.json({ message: 'Server is working!', timestamp: new Date() });
});

app.get('/api/health', (req, res) => {
  res.json({ status: 'healthy', port: process.env.PORT || 8080 });
});

const port = parseInt(process.env.PORT || '8080', 10);
app.listen(port, '0.0.0.0', () => {
  console.log(`✅ Minimal server running on port ${port}`);
});
EOF
felicity@ip-172-31-26-3:/var/www/felicity-hills$ export $(cat .env.production | grep -v '^#' | xargs)
felicity@ip-172-31-26-3:/var/www/felicity-hills$ node minimal-server.js
✅ Minimal server running on port 8080
✅ SendGrid email service initialized
Import error: TypeError [ERR_INVALID_ARG_TYPE]: The "paths[0]" argument must be of type string. Received undefined
    at new NodeError (node:internal/errors:405:5)
    at validateString (node:internal/validators:162:11)
    at Object.resolve (node:path:1115:7)
    at file:///var/www/felicity-hills/dist/index.js:3190:18
    at ModuleJob.run (node:internal/modules/esm/module_job:195:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:337:24) {
  code: 'ERR_INVALID_ARG_TYPE'
}
Failed to initialize data: error: column "title" does not exist
    at /var/www/felicity-hills/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async file:///var/www/felicity-hills/node_modules/drizzle-orm/node-postgres/session.js:83:22
    at async DatabaseStorage.getAppointments (file:///var/www/felicity-hills/dist/index.js:543:12)
    at async DatabaseStorage.initializeData (file:///var/www/felicity-hills/dist/index.js:878:36) {
  length: 105,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '25',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3647',
  routine: 'errorMissingColumn'
}
